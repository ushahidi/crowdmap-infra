location / {
    # First attempt to serve request as file, then
    # as directory, then fall back to displaying a 404.
    try_files $uri $uri/ /index.php?$query_string;
}

# pass the PHP scripts to FastCGI server listening on /var/run/php-fpm.sock
location ^~ /index.php {
    try_files $uri /index.php =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini

    fastcgi_pass unix:/var/run/php-fpm.sock;
    fastcgi_index index.php;
    fastcgi_read_timeout {{ php_fpm_max_execution_time }};
    client_max_body_size {{ php_fpm_upload_max_filesize }};

    include fastcgi_params;
    break;
}
